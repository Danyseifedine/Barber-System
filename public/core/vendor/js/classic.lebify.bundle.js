let translations={en:{toasts:{toastTitle:{success:"Success"},toastMessage:{loginSuccessfulMessage:"Welcome! You have successfully logged in."}},loadingText:{loading:"Loading...",cancel:"Canceling...",submit:"Submitting...",reset:"Resetting...",delete:"Deleting...",save:"Saving...",add:"Adding...",update:"Updating...",search:"Searching...",upload:"Uploading...",download:"Downloading...",next:"Next...",previous:"Previous...",proccessing:"Processing...",sendRequest:"Sending request...",register:"Registering...",login:"Logging in...",logout:"Logging out...",sendEmail:"Sending email...",sendLink:"Sending link...",verifyAccount:"Verifying account...",wait:"Please wait...",verify:"Verifying...",resend:"Resending...",changeEmail:"Changing email...",changeUsername:"Changing username...",changeName:"Changing name...",changePhone:"Changing phone...",changeAddress:"Changing address...",changeAvatar:"Changing avatar...",changeCover:"Changing cover...",follow:"Following...",unfollow:"Unfollowing...",like:"Liking...",unlike:"Unliking...",bookmark:"Bookmarking...",unbookmark:"Unbookmarking...",report:"Reporting...",unreport:"Unreporting...",block:"Blocking...",unblock:"Unblocking...",mute:"Muting...",unmute:"Unmuting...",reportComment:"Reporting comment...",unreportComment:"Unreporting comment...",reportPost:"Reporting post...",unreportPost:"Unreporting post...",reportUser:"Reporting user...",unreportUser:"Unreporting user...",reportMedia:"Reporting media...",unreportMedia:"Unreporting media...",reportHashtag:"Reporting hashtag..."},sweetAlert:{button:{delete:"Delete",cancel:"Cancel"},confirm:{delete:{title:"Are you sure?",text:"Are you sure you want to delete this item? This action cannot be undone and you might lose important data."}},success:{delete:{title:"Item Deleted Successfully!",text:"The item has been permanently removed. This action is irreversible and cannot be undone."}},error:{default:{title:"Oops! Something went wrong.",text:"An error occurred while processing your request. Please try again later. If the issue persists, please contact support."}}}},ar:{toasts:{toastTitle:{success:"نجاح"},toastMessage:{loginSuccessfulMessage:"مرحبًا! لقد قمت بتسجيل الدخول بنجاح."}},loadingText:{loading:"جارٍ التحميل...",cancel:"جارٍ الإلغاء...",submit:"جارٍ الإرسال...",reset:"جارٍ إعادة التعيين...",delete:"جارٍ الحذف...",save:"جارٍ الحفظ...",add:"جارٍ الإضافة...",update:"جارٍ التحديث...",search:"جارٍ البحث...",upload:"جارٍ التحميل...",download:"جارٍ التنزيل...",next:"التالي...",previous:"السابق...",proccessing:"جارٍ المعالجة...",sendRequest:"جارٍ إرسال الطلب...",register:"جارٍ التسجيل...",login:"جارٍ تسجيل الدخول...",logout:"جارٍ تسجيل الخروج...",sendEmail:"جارٍ إرسال البريد الإلكتروني...",sendLink:"جارٍ إرسال الرابط...",verifyAccount:"جارٍ التحقق من الحساب...",wait:"يرجى الانتظار...",verify:"جارٍ التحقق...",resend:"إعادة إرسال...",changeEmail:"جارٍ تغيير البريد الإلكتروني...",changeUsername:"جارٍ تغيير اسم المستخدم...",changeName:"جارٍ تغيير الاسم...",changePhone:"جارٍ تغيير الهاتف...",changeAddress:"جارٍ تغيير العنوان...",changeAvatar:"جارٍ تغيير الصورة الرمزية...",changeCover:"جارٍ تغيير الغلاف...",follow:"جارٍ المتابعة...",unfollow:"جارٍ إلغاء المتابعة...",like:"جارٍ الإعجاب...",unlike:"جارٍ إلغاء الإعجاب...",bookmark:"جارٍ إضافة العلامة...",unbookmark:"جارٍ إزالة العلامة...",report:"جارٍ التبليغ...",unreport:"جارٍ إلغاء التبليغ...",block:"جارٍ الحظر...",unblock:"جارٍ إلغاء الحظر...",mute:"جارٍ التصميت...",unmute:"جارٍ إلغاء التصميت...",reportComment:"جارٍ التبليغ عن التعليق...",unreportComment:"جارٍ إلغاء التبليغ عن التعليق...",reportPost:"جارٍ التبليغ عن المنشور...",unreportPost:"جارٍ إلغاء التبليغ عن المنشور...",reportUser:"جارٍ التبليغ عن المستخدم...",unreportUser:"جارٍ إلغاء التبليغ عن المستخدم...",reportMedia:"جارٍ التبليغ عن الوسائط...",unreportMedia:"جارٍ إلغاء التبليغ عن الوسائط...",reportHashtag:"جارٍ التبليغ عن الوسم..."},sweetAlert:{button:{delete:"حذف",cancel:"إلغاء"},confirm:{delete:{title:"هل أنت متأكد؟",text:"هل أنت متأكد أنك تريد حذف هذا العنصر؟ لا يمكن التراجع عن هذا الإجراء وقد تفقد بيانات مهمة."}},success:{delete:{title:"تم حذف العنصر بنجاح!",text:"تمت إزالة العنصر نهائيًا. هذا الإجراء لا يمكن التراجع عنه"}},error:{default:{title:"عذرًا! حدث خطأ ما.",text:"حدث خطأ أثناء معالجة طلبك. يرجى المحاولة مرة أخرى لاحقًا. إذا استمرت المشكلة، يرجى الاتصال بالدعم."}}}},fr:{toasts:{toastTitle:{success:"Succ\xe8s"},toastMessage:{loginSuccessfulMessage:"Bienvenue! Vous vous \xeates connect\xe9 avec succ\xe8s."}},loadingText:{loading:"Chargement...",cancel:"Annulation...",submit:"Soumission...",reset:"R\xe9initialisation...",delete:"Suppression...",save:"Enregistrement...",add:"Ajout...",update:"Mise \xe0 jour...",search:"Recherche...",upload:"T\xe9l\xe9chargement...",download:"T\xe9l\xe9chargement...",next:"Suivant...",previous:"Pr\xe9c\xe9dent...",proccessing:"Traitement...",sendRequest:"Envoi de la demande...",register:"Inscription...",login:"Connexion...",logout:"D\xe9connexion...",sendEmail:"Envoi de l'email...",sendLink:"Envoi du lien...",verifyAccount:"V\xe9rification du compte...",wait:"Veuillez patienter...",verify:"V\xe9rification...",resend:"Renvoi...",changeEmail:"Modification de l'email...",changeUsername:"Modification du nom d'utilisateur...",changeName:"Modification du nom...",changePhone:"Modification du t\xe9l\xe9phone...",changeAddress:"Modification de l'adresse...",changeAvatar:"Modification de l'avatar...",changeCover:"Modification de la couverture...",follow:"Suivi...",unfollow:"Arr\xeater de suivre...",like:"J'aime...",unlike:"Je n'aime pas...",bookmark:"Mise en favori...",unbookmark:"Supprimer le favori...",report:"Signalement...",unreport:"Annuler le signalement...",block:"Blocage...",unblock:"D\xe9blocage...",mute:"Muet...",unmute:"Activer le son...",reportComment:"Signalement du commentaire...",unreportComment:"Annuler le signalement du commentaire...",reportPost:"Signalement du post...",unreportPost:"Annuler le signalement du post...",reportUser:"Signalement de l'utilisateur...",unreportUser:"Annuler le signalement de l'utilisateur...",reportMedia:"Signalement du m\xe9dia...",unreportMedia:"Annuler le signalement du m\xe9dia...",reportHashtag:"Signalement du hashtag..."},sweetAlert:{button:{delete:"Supprimer",cancel:"Annuler"},confirm:{delete:{title:"\xcates-vous sr?",text:"\xcates-vous sr de vouloir supprimer cet \xe9l\xe9ment? Cette action ne peut pas \xeatre annul\xe9e et vous pourriez perdre des donn\xe9es importantes."}},success:{delete:{title:"\xc9l\xe9ment supprim\xe9 avec succ\xe8s!",text:"L'\xe9l\xe9ment a \xe9t\xe9 supprim\xe9. Cette action est irr\xe9versible et ne peut pas \xeatre annul\xe9e."}},error:{default:{title:"Oups ! Quelque chose s'est mal pass\xe9.",text:"Une erreur s'est produite lors du traitement de votre demande. Veuillez r\xe9essayer plus tard. Si le probl\xe8me persiste, veuillez contacter le support."}}}},es:{toasts:{toastTitle:{success:"\xc9xito"},toastMessage:{loginSuccessfulMessage:"\xa1Bienvenido de nuevo! Has iniciado sesi\xf3n correctamente."}},loadingText:{loading:"Cargando...",cancel:"Cancelando...",submit:"Enviando...",reset:"Restableciendo...",delete:"Borrando...",save:"Guardando...",add:"A\xf1adiendo...",update:"Actualizando...",search:"Buscando...",upload:"Subiendo...",download:"Descargando...",next:"Siguiente...",previous:"Anterior...",proccessing:"Procesando...",sendRequest:"Enviando solicitud...",register:"Registrando...",login:"Iniciando sesi\xf3n...",logout:"Cerrando sesi\xf3n...",sendEmail:"Enviando correo electr\xf3nico...",sendLink:"Enviando enlace...",verifyAccount:"Verificando cuenta...",wait:"Por favor, espera...",verify:"Verificando...",resend:"Reenviando...",changeEmail:"Cambiando correo electr\xf3nico...",changeUsername:"Cambiando nombre de usuario...",changeName:"Cambiando nombre...",changePhone:"Cambiando tel\xe9fono...",changeAddress:"Cambiando direcci\xf3n...",changeAvatar:"Cambiando avatar...",changeCover:"Cambiando portada...",follow:"Siguiendo...",unfollow:"Dejando de seguir...",like:"Me gusta...",unlike:"No me gusta...",bookmark:"Marcando como favorito...",unbookmark:"Desmarcando como favorito...",report:"Reportando...",unreport:"Cancelando reporte...",block:"Bloqueando...",unblock:"Desbloqueando...",mute:"Silenciando...",unmute:"Quitando silencio...",reportComment:"Reportando comentario...",unreportComment:"Cancelando reporte de comentario...",reportPost:"Reportando publicaci\xf3n...",unreportPost:"Cancelando reporte de publicaci\xf3n...",reportUser:"Reportando usuario...",unreportUser:"Cancelando reporte de usuario...",reportMedia:"Reportando multimedia...",unreportMedia:"Cancelando reporte de multimedia...",reportHashtag:"Reportando hashtag..."},sweetAlert:{button:{delete:"Eliminar",cancel:"Cancelar"},confirm:{delete:{title:"\xbfEst\xe1s seguro?",text:"\xbfEst\xe1s seguro de que deseas eliminar este elemento? Esta acci\xf3n no se puede deshacer y podr\xedas perder datos importantes."}},success:{delete:{title:"Elemento eliminado con \xe9xito!",text:"El elemento ha sido eliminado. Esta acci\xf3n no se puede deshacer."}},error:{default:{title:"Oops! Algo sali\xf3 mal.",text:"Se produjo un error al procesar tu solicitud. Por favor, int\xe9ntalo de nuevo m\xe1s tarde. Si el problema persiste, por favor, cont\xe1ctanos."}}}},de:{toasts:{toastTitle:{success:"Erfolg"},toastMessage:{loginSuccessfulMessage:"Willkommen zur\xfcck! Sie haben sich erfolgreich angemeldet."}},loadingText:{loading:"Laden...",cancel:"Abbrechen...",submit:"Senden...",reset:"Zur\xfccksetzen...",delete:"L\xf6schen...",save:"Speichern...",add:"Hinzuf\xfcgen...",update:"Aktualisieren...",search:"Suchen...",upload:"Hochladen...",download:"Herunterladen...",next:"Weiter...",previous:"Zur\xfcck...",proccessing:"Verarbeiten...",sendRequest:"Anfrage senden...",register:"Registrieren...",login:"Anmelden...",logout:"Abmelden...",sendEmail:"E-Mail senden...",sendLink:"Link senden...",verifyAccount:"Konto verifizieren...",wait:"Bitte warten...",verify:"Verifizieren...",resend:"Erneut senden...",changeEmail:"E-Mail \xe4ndern...",changeUsername:"Benutzernamen \xe4ndern...",changeName:"Namen \xe4ndern...",changePhone:"Telefonnummer \xe4ndern...",changeAddress:"Adresse \xe4ndern...",changeAvatar:"Avatar \xe4ndern...",changeCover:"Titelbild \xe4ndern...",follow:"Folgen...",unfollow:"Nicht mehr folgen...",like:"Gef\xe4llt mir...",unlike:"Gef\xe4llt mir nicht mehr...",bookmark:"Lesezeichen setzen...",unbookmark:"Lesezeichen entfernen...",report:"Melden...",unreport:"Meldung zur\xfcckziehen...",block:"Blockieren...",unblock:"Entsperren...",mute:"Stummschalten...",unmute:"Stummschaltung aufheben...",reportComment:"Kommentar melden...",unreportComment:"Meldung des Kommentars zur\xfcckziehen...",reportPost:"Beitrag melden...",unreportPost:"Meldung des Beitrags zur\xfcckziehen...",reportUser:"Benutzer melden...",unreportUser:"Meldung des Benutzers zur\xfcckziehen...",reportMedia:"Medien melden...",unreportMedia:"Meldung der Medien zur\xfcckziehen...",reportHashtag:"Hashtag melden..."},sweetAlert:{button:{delete:"Verwijderen",cancel:"Annuleren"},confirm:{delete:{title:"Weet je het zeker?",text:"Weet je zeker dat je dit item wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt en je kunt belangrijke gegevens verliezen."}},success:{delete:{title:"Item verwijderd met succes!",text:"Het item is verwijderd. Deze actie kan niet ongedaan worden gemaakt."}},error:{default:{title:"Oops! Iets is fout.",text:"Er is iets fout gegaan tijdens het verwerken van uw aanvraag. Probeer het opnieuw. Als het probleem blijft bestaan, neem dan contact op met de ondersteuning."}}}},ja:{toasts:{toastTitle:{success:"成功"},toastMessage:{loginSuccessfulMessage:"お帰りなさい！ログインに成功しました。"}},loadingText:{loading:"読み込み中...",cancel:"キャンセル中...",submit:"送信中...",reset:"リセット中...",delete:"削除中...",save:"保存中...",add:"追加中...",update:"更新中...",search:"検索中...",upload:"アップロード中...",download:"ダウンロード中...",next:"次へ...",previous:"前へ...",proccessing:"処理中...",sendRequest:"リクエスト送信中...",register:"登録中...",login:"ログイン中...",logout:"ログアウト中...",sendEmail:"メール送信中...",sendLink:"リンク送信中...",verifyAccount:"アカウント検証中...",wait:"お待ちください...",verify:"検証中...",resend:"再送中...",changeEmail:"メールアドレス変更中...",changeUsername:"ユーザー名変更中...",changeName:"名前変更中...",changePhone:"電話番号変更中...",changeAddress:"住所変更中...",changeAvatar:"アバター変更中...",changeCover:"カバー変更中...",follow:"フォロー中...",unfollow:"フォロー解除中...",like:"いいね中...",unlike:"いいね解除中...",bookmark:"ブックマーク中...",unbookmark:"ブックマーク解除中...",report:"通報中...",unreport:"通報取り消し中...",block:"ブロック中...",unblock:"ブロック解除中...",mute:"ミュート中...",unmute:"ミュート解除中...",reportComment:"コメント通報中...",unreportComment:"コメント通報取り消し中...",reportPost:"投稿通報中...",unreportPost:"投稿通報取り消し中...",reportUser:"ユーザー通報中...",unreportUser:"ユーザー通報取り消し中...",reportMedia:"メディア通報中...",unreportMedia:"メディア通報取り消し中...",reportHashtag:"ハッシュタグ通報中..."},sweetAlert:{button:{delete:"削除",cancel:"キャンセル"},confirm:{delete:{title:"本当に削除しますか？",text:"本当に削除しますか？この操作は元に戻せません。重要なデータを失います。"}},success:{delete:{title:"削除されました！",text:"削除されました。この操作は元に戻せません。"}},error:{default:{title:"Oops! Algo sali\xf3 mal.",text:"Se produjo un error al procesar tu solicitud. Por favor, int\xe9ntalo de nuevo m\xe1s tarde. Si el problema persiste, por favor, cont\xe1ctanos."}}}}};class Translator{constructor(){this.currentLocale=document.documentElement.lang}getTranslation(e){let o=e.split("."),n=translations[this.currentLocale];for(let i of o)n=n[i];return n}getToastTitle(e){return this.getTranslation(`toasts.toastTitle.${e}`)}getToastMessage(e){return this.getTranslation(`toasts.toastMessage.${e}`)}getloadingText(e){return this.getTranslation(`loadingText.${e}`)}getSweetAlert(e){return this.getTranslation(`sweetAlert.${e}`)}getSweetAlertConfirm(e){return this.getTranslation(`sweetAlert.confirm.${e}`)}getSweetAlertButton(e){return this.getTranslation(`sweetAlert.button.${e}`)}getSweetAlertSuccess(e){return this.getTranslation(`sweetAlert.success.${e}`)}getSweetAlertError(e){return this.getTranslation(`sweetAlert.error.${e}`)}}let url=window.location.href,baseUrl=url.split("/")[0]+"//"+url.split("/")[2],t=new Translator;export const APP_LANG=t.currentLocale;let __API_CFG__={CSRF_TOKEN_SELECTOR:'meta[name="csrf-token"]',CSRF_TOKEN_HEADER:"X-CSRF-TOKEN",CSRF_TOKEN_ERROR:"CSRF token not found",BASE_URL:`${baseUrl}/${t.currentLocale}`,LOCAL_URL:`${baseUrl}`,REQUEST_TIMEOUT:2e4},__FORM_CFG__={INVALID_FEEDBACK_CLASS:"invalid-feedback fw-bold",INVALID_FIELD_CLASS:"is-invalid",PREVENT_MULTIPLE_SUBMISSION_TIMEOUT:1e3},__GENERAL_CFG__={DEFAULT_RANDOM_STRING_LENGTH:8,DEBOUNCE_DELAY:250,THROTTLE_LIMIT:500},__LOADING_CFG__={DEFAULT_LOADING_VERSION:"version_1",DEFAULT_LOADING_TEXT:"Please wait...",DEFAULT_LOADING_ATTRIBUTE:"loading",DEFAULT_LOADING_SPINNER_ATTRIBUTE:"with-spinner",SHOW_SPINNER:"true"},ENDPOINT={AUTHENTICATION:{LOGIN:"/login",LOGOUT:"/logout",REGISTER:"/register",FORGOT_PASSWORD:"/password/email",RESET_PASSWORD:"/password/reset",VERIFY_EMAIL:"/email/resend"}},__SWEET_ALERT_CFG__={TIMER_PROGRESS_BAR:!1,TIMER:5e3};function updateConfig(e){Object.assign(config,e)}class ErrorHandler{static handleError(e){console.error("Error:",e)}static handleValidationError(e,o){Object.keys(e).forEach(n=>{let i=o.querySelector(`#${n}`);i&&(i.classList.add(__FORM_CFG__.INVALID_FIELD_CLASS),i.insertAdjacentHTML("afterend",`<div class="${__FORM_CFG__.INVALID_FEEDBACK_CLASS}">${e[n][0]}</div>`))})}static handleErrorResponse(e,o){let n=e.status;switch(n){case 422:break;case 401:this.handleUnauthorizedError(e);break;case 403:this.handleForbiddenError(e);break;case 404:o("Resource not found");break;case 500:o("Internal server error");break;case 503:this.handleServiceUnavailableError(e);break;default:o("An unexpected error occurred")}}static handleUnauthorizedError(e){window.location.href="/login"}static handleForbiddenError(e){Toast.showErrorToast("Access Denied","You do not have permission to access this resource.")}static handleServiceUnavailableError(e){Toast.showErrorToast("Service Unavailable","The service is currently unavailable. Please try again later.")}}class HttpRequest{constructor(){this.setupCSRFToken()}setupCSRFToken(){let e=document.querySelector(__API_CFG__.CSRF_TOKEN_SELECTOR)?.getAttribute("content");e?axios.defaults.headers.common[__API_CFG__.CSRF_TOKEN_HEADER]=e:console.error(__API_CFG__.CSRF_TOKEN_ERROR)}static async makeRequest(e,o,n=null,i={},r=ErrorHandler.handleError){try{let s=await axios({method:e,url:o,data:n,headers:i,timeout:__API_CFG__.REQUEST_TIMEOUT});return s.data}catch(a){throw a.response?ErrorHandler.handleErrorResponse(a.response,r):ErrorHandler.handleError(a),a}}static async get(e,o={}){return await this.makeRequest("get",e,null,o)}static async post(e,o,n={}){return await this.makeRequest("post",e,o,n)}static async put(e,o,n={}){return await this.makeRequest("put",e,o,n)}static async patch(e,o,n={}){return await this.makeRequest("patch",e,o,n)}static async del(e,o={}){return await this.makeRequest("delete",e,null,o)}}class FormHandler{static clearValidationFeedback(){document.querySelectorAll(`.${__FORM_CFG__.INVALID_FIELD_CLASS}`).forEach(e=>e.classList.remove(__FORM_CFG__.INVALID_FIELD_CLASS)),document.querySelectorAll(".invalid-feedback").forEach(e=>e.remove())}static formListener(e,o,n={}){if(!(e instanceof HTMLFormElement))throw Error('The "form" parameter must be an HTMLFormElement.');if("function"!=typeof o)throw TypeError('The "handleSubmit" parameter must be a function.');let{preventDefault:i=!0,errorCallback:r}=n;e.addEventListener("submit",async e=>{i&&e.preventDefault();try{let n=new FormData(e.target);await o(n)}catch(s){r&&"function"==typeof r?r(s):console.error("Error handling form submission:",s)}})}}let loadingTemplate={version_1:'<span class="sp spinner-border spinner-border-sm spinner_1" role="status" aria-hidden="true" style="display: none;"></span>',version_2:'<span class="sp spinner-border spinner-border-md spinner_3" role="status" aria-hidden="true" style="display: none;"></span>',version_3:'<div class="sp loading_version_3">',version_4:'<div class="sp loading_version_4">',version_5:'<div class="sp loading_version_5">',version_6:'<div class="sp loading_version_6">',version_7:'<div class="sp loading_version_7">',version_8:'<div class="sp loading_version_8">',version_9:'<div class="sp loading_version_9">',version_10:`<div class="sp">
        <div class="spinner-box loading_full_screen_version loading_version_10">
        <div class="blue-orbit leo">
        </div>

        <div class="green-orbit leo">
        </div>

        <div class="red-orbit leo">
        </div>

        <div class="white-orbit w1 leo">
        </div>
        <div class="white-orbit w2 leo">
        </div>
        <div class="white-orbit w3 leo">
        </div>
    </div>
</div>`,version_11:'<div class="sp loading_full_screen_version"><div class="loading_version_11"></div></div>'};class ButtonLoadingState{constructor(e,o=__LOADING_CFG__.DEFAULT_LOADING_VERSION){this.button=e,this.loadingText=this.button.getAttribute(__LOADING_CFG__.DEFAULT_LOADING_ATTRIBUTE)||__LOADING_CFG__.DEFAULT_LOADING_TEXT,this.originalText=this.button.querySelector(".ld-span").textContent.trim(),this.withSpinner=this.button.getAttribute(__LOADING_CFG__.DEFAULT_LOADING_SPINNER_ATTRIBUTE)===__LOADING_CFG__.SHOW_SPINNER,this.withSpinner&&(this.spinnerTemplate=loadingTemplate[o],this.button.querySelector(".sp")||this.button.insertAdjacentHTML("afterbegin",this.spinnerTemplate),this.spinnerElement=this.button.querySelector(".sp"))}activate(){this.button.querySelector(".ld-span").textContent=this.loadingText,this.withSpinner&&(this.spinnerElement.style.display="inline-block"),this.button.disabled=!0}reset(){this.button.querySelector(".ld-span").textContent=this.originalText,this.withSpinner&&(this.spinnerElement.style.display="none"),this.button.disabled=!1}}class SweetAlert{static async deleteSuccess(e,o,n={}){let i={title:e||t.getSweetAlertSuccess("delete.title"),text:o||t.getSweetAlertSuccess("delete.text"),icon:"success",timer:__SWEET_ALERT_CFG__.TIMER,timerProgressBar:__SWEET_ALERT_CFG__.TIMER_PROGRESS_BAR,customClass:{title:"custom-title-class-success-delete",text:"custom-text-class-success-delete",confirmButton:"custom-confirm-button-class-success-delete"},...n};await Swal.fire(i)}static async error(e,o,n={}){let i={title:e||t.getSweetAlertError("default.title"),text:o||t.getSweetAlertError("default.text"),icon:"error",timerProgressBar:__SWEET_ALERT_CFG__.TIMER_PROGRESS_BAR,timer:__SWEET_ALERT_CFG__.TIMER,customClass:{title:"custom-title-class-error",text:"custom-text-class-error",confirmButton:"custom-confirm-button-class-error"},...n};await Swal.fire(i)}static async deleteAction(e=t.getSweetAlertConfirm("delete.title"),o=t.getSweetAlertConfirm("delete.text"),n=t.getSweetAlertButton("delete"),i=t.getSweetAlertButton("cancel"),r={}){let s={icon:"warning",html:`<div class="custom-delete-alert">${t.getSweetAlertConfirm("delete.text")}</div>`,showCancelButton:!0,confirmButtonText:n,cancelButtonText:i,customClass:{title:"custom-title-class-delete",confirmButton:"custom-confirm-button-class-delete",cancelButton:"custom-cancel-button-class-delete",text:"custom-text-class-delete"},reverseButtons:!0,focusCancel:!0,allowOutsideClick:!1,...r},a=await Swal.fire({title:e,text:o,...s});return a.isConfirmed}}class Toast{static showSuccessToast(e,o,n=APP_LANG,i={}){let r={theme:"dark",backgroundColor:"#2e8b57",iconColor:"white",titleColor:"white",messageColor:"white",icon:"bi bi-check-all",position:"topRight",timeout:5e3,progressBar:!0,progressBarColor:"#1b5e38",closeOnClick:!0,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",zindex:99999,rtl:"ar"==n,...i};iziToast.success({title:e,message:o,...r})}static showWarningToast(e,o,n=APP_LANG,i={}){let r={theme:"dark",backgroundColor:"#ffa500",iconColor:"white",titleColor:"white",messageColor:"white",icon:"bi bi-exclamation-triangle",position:"topRight",timeout:1e4,progressBar:!0,progressBarColor:"#b37700",closeOnClick:!0,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",zindex:99999,rtl:"ar"==n,...i};iziToast.warning({title:e,message:o,...r})}static showInfoToast(e,o,n=APP_LANG,i={}){let r={theme:"dark",backgroundColor:"#17a2b8",icon:"bi bi-info",iconColor:"white",messageColor:"white",titleColor:"white",position:"topRight",timeout:5e3,progressBar:!0,progressBarColor:"#117a8b",closeOnClick:!0,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",zindex:99999,rtl:"ar"==n,...i};iziToast.info({title:e,message:o,...r})}static showErrorToast(e,o,n=APP_LANG,i={}){let r={theme:"dark",position:"topRight",timeout:1e4,progressBar:!0,closeOnClick:!1,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",icon:"bi bi-exclamation-triangle",backgroundColor:"#dc3545",titleColor:"white",messageColor:"white",iconColor:"white",progressBarColor:"#a71d2a",zindex:99999,rtl:"ar"==n,...i};iziToast.error({title:e,message:o,...r})}static showConfirmationToast(e,o,n=APP_LANG,i,r={}){let s={theme:"dark",position:"center",timeout:!1,progressBar:!1,closeOnClick:!1,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",buttons:[["<button>Confirm</button>",i,!0],["<button>Cancel</button>",function(e,o){e.hide({transitionOut:"fadeOutUp"},o,"buttonName")}],],zindex:99999,rtl:"ar"==n,...r};iziToast.question({title:e,message:o,...s})}static showLoadingToast(e,o=APP_LANG,n={}){let i={position:"center",timeout:!1,progressBar:!1,closeOnClick:!1,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",overlay:!0,overlayClose:!1,displayMode:"once",zindex:99999,rtl:"ar"==o,...n};iziToast.show({message:e,...i})}static hideLoadingToast(){let e=document.querySelector(".iziToast");e&&iziToast.hide({},e,"overlay")}static showCustomToast(e){iziToast.show(e)}static hideToastById(e){iziToast.hide("#"+e)}static hideToastByRef(e){iziToast.hide({},e)}static hideAllToasts(){iziToast.hide({},!1,!0)}static showNotificationToast(e,o,n=APP_LANG,i={}){let r={theme:"dark",backgroundColor:"#343a40",titleColor:"white",messageColor:"white",position:"topRight",timeout:5e3,progressBar:!0,progressBarColor:"#212529",closeOnClick:!0,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",zindex:99999,rtl:"ar"==n,...i};iziToast.show({title:e,message:o,...r})}static showToastWithHTML(e,o,n=APP_LANG,i={}){let r={position:"topRight",timeout:1e4,progressBar:!0,closeOnClick:!0,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",zindex:99999,rtl:"ar"==n,...i};iziToast.show({title:e,message:o,...r})}static showToastWithImage(e,o,n=APP_LANG,i,r={}){let s={position:"topRight",timeout:1e4,progressBar:!0,closeOnClick:!0,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",image:i,imageWidth:100,zindex:99999,rtl:"ar"==n,...r};iziToast.show({title:e,message:o,...s})}static handleSuccessToastWithStorage(e,o,n,i,r=APP_LANG){let s=FunctionUtility.getQueryParameter(e),a=localStorage.getItem(i);s&&!a&&(Toast.showSuccessToast(o,n,{rtl:"ar"==r}),localStorage.setItem(i,!0))}}class FunctionUtility{static preventMultipleSubmission(e){e.disabled=!0,setTimeout(()=>{e.disabled=!1},__FORM_CFG__.PREVENT_MULTIPLE_SUBMISSION_TIMEOUT)}static generateRandomString(e=__GENERAL_CFG__.DEFAULT_RANDOM_STRING_LENGTH){let o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="";for(let i=0;i<e;i++)n+=o[Math.floor(Math.random()*o.length)];return n}static debounce(e,o=__GENERAL_CFG__.DEBOUNCE_DELAY){let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(this,i)},o)}}static throttle(e,o=__GENERAL_CFG__.THROTTLE_LIMIT){let n=0;return(...i)=>{let r=Date.now();if(!(r-n<o))return n=r,e.apply(this,i)}}static clamp(e,o,n){return Math.max(o,Math.min(n,e))}static generateUniqueId(){let e=Date.now().toString(36),o=generateRandomString(5);return`${e}-${o}`}static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}static async copyToClipboard(e){try{await navigator.clipboard.writeText(e),Toast.showSuccessToast("","The text has been copied to your clipboard.")}catch(o){Toast.showErrorToast("","Failed to copy text: "+o)}}static getQueryParameter(e){let o=new URLSearchParams(window.location.search);return o.get(e)||null}static smoothScroll(e,o={}){let n={behavior:"smooth",block:"start",inline:"nearest",offset:0,speed:500,easing:"easeInOutQuad",...o},i={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:-1+(4-2*e)*e};document.querySelectorAll(e).forEach(e=>{e.addEventListener("click",function(e){let o=this.getAttribute("href"),r=document.querySelector(o);if(r){e.preventDefault();let s=r.getBoundingClientRect().top+window.pageYOffset,a=window.pageYOffset,l=s-a-n.offset,c=n.speed,d=null;function u(e){d||(d=e);let o=e-d,r=i[n.easing](o/c);window.scrollTo(0,a+l*r),o<c?window.requestAnimationFrame(u):window.scrollTo({top:s-n.offset,behavior:n.behavior,block:n.block,inline:n.inline})}window.requestAnimationFrame(u)}else console.warn(`Target element not found for selector: ${o}`)})})}static generatePassword(e=12,o){let n=e,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$&?",r=i.length,s="";for(let a=0;a<n;a++)s+=i.charAt(Math.floor(Math.random()*r));o.value=s}static clearForm(e){let o=document.querySelector(e);if(!o)throw Error(`No form found with the selector: ${e}`);o.querySelectorAll("input, textarea").forEach(e=>{e.value="",e.classList.remove("is-invalid")}),o.querySelectorAll(".invalid-feedback").forEach(e=>e.remove())}static submitFormByAttribute(){let e=document.querySelectorAll("[form-submit]");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let o=this.getAttribute("form-submit"),n=document.querySelector(`[form-name="${o}"]`);n?n.submit():console.error(`No form found with the name: ${o}`)})})}static closeModalWithButton(e,o,n=()=>{}){let i=document.querySelector(`#${e}`);document.querySelectorAll(`${o}`).forEach(e=>{e.addEventListener("click",()=>{let e=bootstrap.Modal.getInstance(i);if(e)e.hide();else{i.classList.remove("show"),i.style.display="none",document.body.classList.remove("modal-open");let o=document.querySelector(".modal-backdrop");o&&o.remove()}n()})})}static closeModal(e,o){let n=document.querySelector(`#${e}`),i=bootstrap.Modal.getInstance(n);i.hide(),o()}static getLoadingModalContent(){return`
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Please wait...</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex justify-content-center align-items-center" style="height: 300px;">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        `}static getErrorModalContent(){return`
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Error</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>An error occurred while fetching application details. Please try again later.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    `}static toggleButtonBasedOnFormValidity(e,o){if(!e||!o){console.error("toggleButtonBasedOnFormValidity: form or button is not defined");return}let n=e.querySelectorAll("input, textarea, select"),i=!1;n.forEach(e=>{e.addEventListener("input",()=>{i=!1,n.forEach(e=>{"checkbox"===e.type?e.checked&&(i=!0):""!==e.value.trim()&&(i=!0)}),o.classList.toggle("disabled",!i)})}),n.forEach(e=>{"checkbox"===e.type?e.checked&&(i=!0):""!==e.value.trim()&&(i=!0)}),o.classList.toggle("disabled",!i)}}export class $SingleFormPostController{constructor(e){this.config=e,this.form=document.querySelector(e.formSelector),this.submitBtn=document.querySelector(e.buttonSelector),this.externalBtn=document.querySelector(e.externalButtonSelector)}async processForm(e){let o=this.submitBtn||this.externalBtn,n=new ButtonLoadingState(o,this.config.loadingTemplate);this.config.onLoading?this.config.onLoading(o):n.activate();try{let i=await HttpRequest.post(this.config.endpoint,e);FormHandler.clearValidationFeedback(this.form),this.config.onSuccess&&this.config.onSuccess(i)}catch(r){this.config.feedback&&r.response&&422===r.response.status&&(FormHandler.clearValidationFeedback(this.form),ErrorHandler.handleValidationError(r.response.data.errors,this.form)),this.config.onError&&this.config.onError(r)}finally{this.config.onLoaded?this.config.onLoaded(o):n.reset()}}init(){this.form&&FormHandler.formListener(this.form,e=>this.processForm(e)),this.externalBtn&&this.externalBtn.addEventListener("click",e=>{if(e.preventDefault(),this.form){let o=new FormData(this.form);this.processForm(o)}else console.error(`Form with selector ${this.config.formSelector} not found`)})}static initDropzone(e,o,n=1,i=10,r=".pdf",s){var a=document.querySelector(__API_CFG__.CSRF_TOKEN_SELECTOR).getAttribute("content");return new Dropzone(e,{autoDiscover:!1,url:o,paramName:"file",maxFiles:n,headers:{"X-CSRF-TOKEN":a},maxFilesize:i,addRemoveLinks:!0,acceptedFiles:r,accept:function(e,o){"wow.pdf"==e.name?o("Naha, you don't."):o()},success:s})}}export class $GetTabController{constructor(e){this.config=e,this.activeTab=null}initTab(){this.attachTabListeners(),this.syncActiveTabWithUrl()}attachTabListeners(){let e=document.querySelectorAll(this.config.TabSelector);e.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault(),this.switchTab(e)})})}syncActiveTabWithUrl(){let e=this.getTabFromUrl(),o;if(e&&(o=document.querySelector(`${this.config.TabSelector}[tab-name="${e}"]`)),o||(o=document.querySelector(this.config.ActiveTabSelector)),document.querySelectorAll(this.config.TabSelector).forEach(e=>{e.classList.remove("active")}),o)o.classList.add("active"),this.activeTab=o,this.fetchTabContent(o.getAttribute("tab-name"));else{let n=document.querySelector(this.config.TabSelector);n&&this.switchTab(n,!0)}}switchTab(e,o=!0){let n=e.getAttribute("tab-name");this.activeTab&&this.activeTab.classList.remove("active"),e.classList.add("active"),this.activeTab=e,this.fetchTabContent(n),o&&this.config.updateUrl&&this.updateUrlWithTab(n)}async fetchTabContent(e){let o=document.querySelector(this.config.TabContentSelector);this.config.onLoading&&this.config.onLoading(),o.innerHTML=this.config.LoadingHtml;let n=`${this.config.endpoint}/${e}`;try{let i=await this.httpGet(n);this.config.onSuccess&&this.config.onSuccess(i)}catch(r){console.error("Failed to fetch tab content:",r),this.config.onError&&this.config.onError(r)}finally{this.config.onLoad&&this.config.onLoad()}}updateUrlWithTab(e){let o=new URL(window.location);o.searchParams.set("tab",e),window.history.pushState({},"",o)}getTabFromUrl(){let e=new URL(window.location);return e.searchParams.get("tab")}async httpGet(e){let o=await fetch(e,{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)throw Error(`HTTP error! status: ${o.status}`);return await o.json()}static observeTabChanges(e){let{tabCallbacks:o,elementSelector:n,tabSelector:i}=e,r=null,s=!1,a=[],l=()=>{if(a.length>0&&!s){let e=a.shift();setTimeout(()=>{c(e)},1e3)}},c=e=>{if(r===e){let a=document.querySelector(`${i}[tab-name="${e}"]`);a&&(a.disabled=!0);return}s=!0,r=e;let c=[];if(o&&("function"==typeof o.all?c.push(o.all):Array.isArray(o.all)&&c.push(...o.all),"function"==typeof o[e]?c.push(o[e]):Array.isArray(o[e])&&c.push(...o[e])),c.length>0){let d=n?document.querySelector(n):document.documentElement;if(d){let u,h=new MutationObserver((o,n)=>{clearTimeout(u),u=setTimeout(()=>{n.disconnect(),c.forEach(o=>{try{o()}catch(n){console.error(`[${e}] Error executing callback:`,n)}}),s=!1,l()},50)});h.observe(d,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),setTimeout(()=>{s&&(h.disconnect(),c.forEach(o=>{try{o()}catch(n){console.error(`[${e}] Error executing callback:`,n)}}),s=!1,l())},500)}else console.warn(`[${e}] Target element not found for selector: ${n}`),s=!1,l()}else console.log(`[${e}] No callbacks found`),s=!1,l()},d=function(e){let o=this.getAttribute("tab-name");if(o===r){e.preventDefault();return}console.log(`[${o}] Tab clicked, added to queue`),document.querySelectorAll(i).forEach(e=>{e.classList.remove("active")}),this.classList.add("active"),a.push(o),l()};document.querySelectorAll(i).forEach(e=>{e.removeEventListener("click",d),e.addEventListener("click",d)});let u=document.querySelector(`${i}.active`);if(u){let h=u.getAttribute("tab-name");c(h)}else console.warn("No active tab found")}}export class $InfiniteLoaderController{constructor(e){this.config={endpoint:e.endpoint,scrollHeight:e.scrollHeight||500,debounceDelay:e.debounceDelay||200,initialPage:e.initialPage||1,pageSize:e.pageSize||20,maxRetries:e.maxRetries||3,retryDelay:e.retryDelay||1e3,onSuccess:e.onSuccess||(()=>{}),onError:e.onError||console.error,onLoading:e.onLoading||(()=>{}),onLoaded:e.onLoaded||(()=>{}),params:e.params||{},headers:e.headers||{},onDestroy:e.onDestroy||(()=>{})},this.isLoading=!1,this.hasMorePages=!0,this.currentPage=this.config.initialPage,this.lastScrollTop=0,this.debounceTimer=null,this.retryCount=0,this.cache=new Map,this.intersectionObserver=null,this.initIntersectionObserver()}initIntersectionObserver(){let e={root:null,rootMargin:`${this.config.scrollHeight}px`,threshold:0};this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!this.isLoading&&this.hasMorePages&&this.debouncedFetchData()})},e);let o=document.createElement("div");o.id="scroll-sentinel",document.body.appendChild(o),this.intersectionObserver.observe(o)}debouncedFetchData(){this.config.onLoading(),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.fetchData()},this.config.debounceDelay)}async fetchData(){if(!this.isLoading){this.isLoading=!0;try{let e=this.cache.get(this.currentPage);if(e){this.processData(e);return}let o=new URL(this.config.endpoint);o.searchParams.append("page",this.currentPage),o.searchParams.append("pageSize",this.config.pageSize),o.searchParams.append("perPage",this.config.perPage),Object.entries(this.config.params).forEach(([e,n])=>{o.searchParams.append(e,n)});let n=await this.fetchWithRetry(()=>fetch(o,{headers:this.config.headers})),i=await n.json();this.cache.set(this.currentPage,i),this.processData(i)}catch(r){this.config.onError(r)}finally{this.isLoading=!1,this.config.onLoaded()}}}async fetchWithRetry(e,o=0){try{return await e()}catch(n){if(o<this.config.maxRetries)return await new Promise(e=>setTimeout(e,this.config.retryDelay)),this.fetchWithRetry(e,o+1);throw n}}processData(e){!e||e.empty||Array.isArray(e)&&0===e.length?(this.hasMorePages=!1,this.destroy()):(this.config.onSuccess(e),this.currentPage++)}reset(){this.currentPage=this.config.initialPage,this.hasMorePages=!0,this.isLoading=!1,this.cache.clear(),this.debounceTimer&&clearTimeout(this.debounceTimer)}destroy(){this.intersectionObserver&&this.intersectionObserver.disconnect();let e=document.getElementById("scroll-sentinel");e&&e.remove(),this.cache.clear(),this.debounceTimer&&clearTimeout(this.debounceTimer),this.isLoading=!1,this.hasMorePages=!1,this.currentPage=this.config.initialPage,this.lastScrollTop=0,this.retryCount=0,"function"==typeof this.config.onDestroy&&this.config.onDestroy()}}export class $IconStateController{constructor(e){this.validateConfig(e),this.config=e,this.config.countChangeAmount=this.config.countChangeAmount||1}validateConfig(e){["formSelector","dataAttribute","endpoint","iconSelector"].forEach(o=>{if(!e[o])throw Error(`Missing required configuration field: ${o}`)})}initForms(){let e=document.querySelectorAll(this.config.formSelector);e.forEach(e=>{if(e.dataset.listenerAttached)return;let o=async o=>{o.preventDefault(),await this.handleSubmit(o,e)};e.addEventListener("submit",o),e.dataset.listenerAttached="true"})}async handleSubmit(e,o){let n=o.getAttribute(this.config.dataAttribute);try{this.config.beforeSubmit&&this.config.beforeSubmit(o,n),this.toggleIcon(o),this.config.increaseCount&&this.updateCount(n,o),await this.updateData(n,o)}catch(i){console.error("Error in handleSubmit:",i),this.config.onError&&this.config.onError(i,o,n)}}updateCount(e,o){if(!this.config.countSelector)return;let n=document.querySelector(`.${this.config.countSelector}-${e}`);if(console.log(this.config.countSelector),!n)return;let i=o.querySelector(this.config.iconSelector),r=parseInt(n.innerHTML);this.config.toggleClass&&(n.innerHTML=i.classList.contains(this.config.toggleClass)?r+this.config.countChangeAmount:r-this.config.countChangeAmount),this.config.beforeClickIcon&&this.config.afterClickIcon&&(i.classList.contains(this.config.beforeClickIcon)&&(n.innerHTML=r-this.config.countChangeAmount),i.classList.contains(this.config.afterClickIcon)&&(n.innerHTML=r+this.config.countChangeAmount))}async updateData(e,o){let n=new FormData(o);try{let i=await HttpRequest.post(`${this.config.endpoint}/${e}`,n);this.config.onSuccess&&this.config.onSuccess(i,o,e)}catch(r){console.error("Error in updateData:",r),this.config.onError&&this.config.onError(r,o,e)}}toggleIcon(e){let o=e.querySelector(this.config.iconSelector);o&&(this.config.toggleClass&&o.classList.toggle(this.config.toggleClass),this.config.beforeClickIcon&&this.config.afterClickIcon&&(o.classList.toggle(this.config.beforeClickIcon),o.classList.toggle(this.config.afterClickIcon)))}}export class $ModalFormFetchController{constructor(e){this.config={modalId:"",endpoint:"",formId:"",submitBtnId:"",closeBtnClass:"close-edit-modal",onSuccess(){},onError(){},onSubmit(){},...e},this.modal=null,this.form=null,this.setupEventListeners()}setupEventListeners(){document.querySelectorAll(`.${this.config.closeBtnClass}`).forEach(e=>{e.addEventListener("click",()=>{this.closeModal(),FunctionUtility.clearForm(`${this.config.formId}`)})})}showSkeleton(){let e=document.querySelector(`#${this.config.modalId} .modal-body`),o=document.querySelector(this.config.formId);o.style.display="none",e&&o&&e.insertAdjacentHTML("afterbegin",`
                <div class="skeleton-overlay">
                    <div class="skeleton-wrapper">
                        <div class="skeleton-header"></div>
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text"></div>
                        <div class="skeleton-button"></div>
                    </div>
                </div>
            `)}hideSkeleton(){let e=document.querySelector(`#${this.config.modalId} .skeleton-overlay`);if(e){e.remove();let o=document.querySelector(this.config.formId);o.style.display="block"}}async show(e){try{this.showModal(),this.showSkeleton();let o=await HttpRequest.get(`${this.config.endpoint}/${e}`);this.hideSkeleton(),this.populateForm(o),this.config.onSuccess(o)}catch(n){this.hideSkeleton(),console.error("Error fetching data:",n),this.config.onError(n)}}showModal(){this.modal=new bootstrap.Modal(document.getElementById(this.config.modalId)),this.modal.show()}closeModal(){this.modal&&this.modal.hide()}populateForm(e){if(this.form=document.querySelector(this.config.formId),!this.form){console.error(`Form with id "${this.config.formId}" not found`);return}for(let[o,n]of Object.entries(e)){let i=this.form.elements[o];if(i){if("checkbox"==i.type)i.checked=1==n||!0==n||"active"==n||"1"==n||"true"==n||"public"==n||"available"==n;else if("textarea"===i.tagName.toLowerCase())i.value=n;else if("select"===i.tagName.toLowerCase())i.value=n;else if(this.config.quillSelector&&document.querySelector(this.config.quillSelector)){let r=Quill.find(document.querySelector(this.config.quillSelector));r&&(r.root.innerHTML=n);let s=this.form.querySelector(`input[name="${o}"]`);s&&(s.value=n)}else i.tagName.toLowerCase(),i.value=n}else{let a=this.form.querySelector(`input[name="${o}"]`);if(a)a.value=n;else{let l=this.form.querySelector(`textarea[name="${o}"]`);l&&(l.value=n)}}}}async handleSubmit(e){if(!this.form){console.error("Form not initialized");return}let o=new FormData(this.form),n=o.get("id");try{"function"==typeof this.config.onSubmit?await this.config.onSubmit(n,o,this):console.error("onSubmit is not a function")}catch(i){console.error("Error submitting form:",i),this.config.onError(i)}}getFormData(){return this.form?new FormData(this.form):(console.error("Form not initialized"),null)}}export class $ModalDataDisplayController{constructor(e){this.config={modalId:"",endpoint:"",setTimeout:null,buttonSelector:"",renderContent(){},onSuccess(){},onError(){},onLoading:null,...e},this.modal=null,this.setupEventListeners()}setupEventListeners(){document.querySelectorAll(this.config.buttonSelector).forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();let n=e.getAttribute("data-id")||e.id;n?this.show(n):console.error("No ID found for the clicked button")})})}showLoading(){let e=document.querySelector(`#${this.config.modalId} .modal-dialog`);e.innerHTML=`
            <div class="modal-content">
                <div class="modal-body">
                    <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        `}async show(e){if(!e){console.error("Invalid ID provided");return}try{if(this.showModal(),"function"==typeof this.config.onLoading){let o=document.querySelector(`#${this.config.modalId} .modal-dialog`);o.innerHTML=this.config.onLoading()}else this.showLoading();if(this.config.setTimeout)setTimeout(async()=>{let o=await HttpRequest.get(`${this.config.endpoint}/${e}`);this.renderContent(o),this.config.onSuccess(o)},this.config.setTimeout);else{let n=await HttpRequest.get(`${this.config.endpoint}/${e}`);this.renderContent(n),this.config.onSuccess(n)}}catch(i){console.error("Error fetching data:",i),this.renderErrorContent(),this.config.onError(i)}}showModal(){this.modal=new bootstrap.Modal(document.getElementById(this.config.modalId)),this.modal.show()}closeModal(){this.modal&&this.modal.hide()}renderContent(e){let o=document.querySelector(`#${this.config.modalId} .modal-dialog`);o.innerHTML=this.config.renderContent(e)}renderErrorContent(){let e=document.querySelector(`#${this.config.modalId} .modal-dialog`);e.innerHTML=FunctionUtility.getErrorModalContent()}}
